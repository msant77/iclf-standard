{
  "version": "1.0",
  "directives": [
    {
      "name": "title",
      "description": "Sets the song title.",
      "instructions": "Display as the song’s title in the UI. Store as metadata for search or sharing.",
      "scope": "global",
      "required": true,
      "example": "Parla Più Piano",
      "unique": true
    },
    {
      "name": "key",
      "description": "Specifies the musical key of the song or section.",
      "instructions": "Display as the song’s key in the UI. Use for transposition calculations. If within a section, applies to that section only.",
      "scope": "global or section",
      "required": true,
      "default": "C",
      "example": "Am",
      "unique": true,
      "validation": {
        "type": "string",
        "pattern": "^[A-G](?:#|b)?(?:m|maj|min|dim|°|aug|sus2|sus4)?$",
        "description": "Must be a musical key: A-G, optional # or b, optional m, maj, min, dim, °, aug, sus2, or sus4 (e.g., C, Am, F#, Bbmaj)."
      }
    },
    {
      "name": "composer",
      "description": "Specifies the song’s composer.",
      "instructions": "Display as the composer in the UI, typically below the title. Store as metadata for attribution.",
      "scope": "global",
      "required": false,
      "example": "Nino Rota",
      "unique": true
    },
    {
      "name": "arranged_by",
      "description": "Specifies the arranger or transcriber of the song or ICLF file.",
      "instructions": "Display as metadata in the UI, typically below the title or composer. Store for attribution or search.",
      "scope": "global",
      "required": false,
      "example": "Transcribed by Maria",
      "unique": true,
      "validation": {
        "type": "string",
        "pattern": "^.+$",
        "description": "Must be a non-empty string (e.g., Transcribed by Maria)."
      }
    },
    {
      "name": "creation_date",
      "description": "Specifies the creation date of the ICLF file.",
      "instructions": "Display as metadata in the UI or use for sorting songs. Store as ISO 8601 date (YYYY-MM-DD).",
      "scope": "global",
      "required": false,
      "example": "2025-04-28",
      "unique": true,
      "validation": {
        "type": "string",
        "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
        "description": "Must be an ISO 8601 date in YYYY-MM-DD format (e.g., 2025-04-28)."
      }
    },
    {
      "name": "section",
      "description": "Defines a new section (e.g., Verse, Chorus).",
      "instructions": "Start a new section in the data model. Display the section name as a heading in the UI.",
      "scope": "section",
      "required": false,
      "example": "Verse",
      "unique": false
    },
    {
      "name": "repeat",
      "description": "Instructs to repeat a section a specified number of times.",
      "instructions": "Parse as 'Section, Nx' (e.g., 'Chorus, 2x'). Display a repeat indicator (e.g., 'Repeat Chorus 2x') or duplicate section content in the UI. Validate that Section exists.",
      "scope": "section",
      "required": false,
      "example": "Chorus, 2x",
      "unique": false,
      "validation": {
        "type": "string",
        "pattern": "^\\w+,\\s*\\d+x$",
        "description": "Must be 'Section, Nx' where Section is a section name and N is a positive integer (e.g., Chorus, 2x)."
      }
    },
    {
      "name": "capo",
      "description": "Indicates the capo position on a guitar.",
      "instructions": "Display as 'Capo: N' in the UI. Use for chord transposition if requested.",
      "scope": "global",
      "required": false,
      "default": "0",
      "example": "2",
      "unique": true,
      "validation": {
        "type": "integer",
        "minimum": 0,
        "maximum": 12,
        "description": "Must be a non-negative integer between 0 and 12 (e.g., 2)."
      }
    },
    {
      "name": "tempo",
      "description": "Sets the tempo in beats per minute (BPM).",
      "instructions": "Display as 'Tempo: N BPM' in the UI. Optionally integrate with a metronome feature.",
      "scope": "global",
      "required": false,
      "example": "80",
      "unique": true,
      "validation": {
        "type": "integer",
        "minimum": 20,
        "maximum": 300,
        "description": "Must be a positive integer between 20 and 300 (e.g., 80)."
      }
    },
    {
      "name": "strumming",
      "description": "Specifies a strumming pattern for a section or song.",
      "instructions": "Display as a rhythmic guide (e.g., 'D-DU-UDU'). Optionally integrate with a metronome or visual guide in the UI.",
      "scope": "global or section",
      "required": false,
      "example": "D-DU-UDU",
      "unique": false,
      "validation": {
        "type": "string",
        "pattern": "^[DUR\\-]+$",
        "description": "Must be a sequence of D (down), U (up), R (rest), or - (pause) (e.g., D-DU-UDU)."
      }
    },
    {
      "name": "tuning",
      "description": "Specifies the instrument tuning as a text attribute.",
      "instructions": "Display as metadata in the UI (e.g., 'Tuning: EADGBE'). Store for reference; no structured parsing in v1.0.",
      "scope": "global",
      "required": false,
      "example": "EADGBE",
      "unique": true
    }
  ],
  "chords": {
    "syntax": "[Chord[:Attribute, Value][Attribute2, Value2]]",
    "description": "Notates a chord aligned with a syllable or word. Optional attributes specify inversions, voicings, or performance details.",
    "instructions": "Display the chord above or before the associated text. Parse attributes to adjust display (e.g., show C/E for [C:inversion, 1]). No diagrams in v1.0.",
    "validation": {
      "chord": {
        "type": "string",
        "pattern": "^(?:N\\.C\\.|[A-G][#b]?(?:m|min)?(?:maj|dim|°|˚|º|ø|\\+|aug)?(?:sus[24])?(?:6|7|9|11|13)?(?:sus[24])?(?:add(?:9|11|13))?(?:(?:\\()?[b#](?:5|9|11|13)(?:\\))?)*(?:/[A-G][#b]?)?)$",
        "description": "Must be a valid chord: N.C. (no chord), or root (A-G), optional accidental (# or b), optional minor (m or min), optional quality (maj, dim, °, ˚, º, ø, +, aug), optional suspension (sus2, sus4), optional extension (6, 7, 9, 11, 13), optional add (add9, add11, add13), optional alterations (b5, #5, b9, #9, #11, b13 with optional parentheses), optional bass note (/E). Examples: C, Am, Cmaj7, Cmmaj7, C7sus4, Cadd9, C7b9, Dm7b5, Bb7/Ab, N.C."
      }
    },
    "attributes": [
      {
        "name": "inversion",
        "description": "Specifies the chord inversion (e.g., first inversion for C/E).",
        "instructions": "Display as Chord/Bass (e.g., C/E for [C:inversion, 1]).",
        "example": "1",
        "validation": {
          "type": "integer",
          "minimum": 0,
          "maximum": 3,
          "description": "Must be a non-negative integer (0 for root position, 1 for first inversion, etc., up to 3 for seventh chords)."
        }
      },
      {
        "name": "voicing",
        "description": "Specifies a chord voicing or fingering (e.g., open or barre).",
        "instructions": "Display the chord with the specified voicing (e.g., Am/open).",
        "example": "open",
        "validation": {
          "type": "string",
          "pattern": "^\\w+$",
          "description": "Must be a voicing name (e.g., open, barre)."
        }
      },
      {
        "name": "capo",
        "description": "Transposes the chord as if played with a capo.",
        "instructions": "Display the transposed chord (e.g., [C:capo, 2] as D).",
        "example": "2",
        "validation": {
          "type": "integer",
          "minimum": 0,
          "maximum": 12,
          "description": "Must be a non-negative integer between 0 and 12 (e.g., 2)."
        }
      },
      {
        "name": "bass",
        "description": "Specifies one or more bass notes for the chord, including runs.",
        "instructions": "Display as Chord/Bass or indicate bass run (e.g., Am/A-C-E for [Am:bass, A-C-E]).",
        "example": "A-C-E",
        "validation": {
          "type": "string",
          "pattern": "^[A-G](?:#|b)?(?:-[A-G](?:#|b)?)*$",
          "description": "Must be one or more musical notes separated by hyphens (A-G, optional # or b) (e.g., G, A-C-E)."
        }
      }
    ],
    "variations": [
      {
        "name": "root",
        "description": "Root notes A through G",
        "values": [
          "A",
          "B",
          "C",
          "D",
          "E",
          "F",
          "G"
        ],
        "tags": [
          "basic"
        ]
      },
      {
        "name": "sharp",
        "description": "Sharp accidental",
        "symbol": "#",
        "examples": [
          "C#",
          "F#",
          "G#",
          "A#",
          "D#",
          "E#",
          "B#"
        ],
        "tags": [
          "accidental"
        ]
      },
      {
        "name": "flat",
        "description": "Flat accidental",
        "symbol": "b",
        "examples": [
          "Bb",
          "Eb",
          "Ab",
          "Db",
          "Gb",
          "Cb",
          "Fb"
        ],
        "tags": [
          "accidental"
        ]
      },
      {
        "name": "minor-m",
        "description": "Minor chord using m suffix",
        "symbol": "m",
        "examples": [
          "Am",
          "Dm",
          "Em",
          "Bm",
          "F#m",
          "C#m",
          "Gm"
        ],
        "tags": [
          "minor",
          "quality"
        ]
      },
      {
        "name": "minor-min",
        "description": "Minor chord using min suffix",
        "symbol": "min",
        "examples": [
          "Amin",
          "Dmin",
          "Emin"
        ],
        "tags": [
          "minor",
          "quality"
        ]
      },
      {
        "name": "diminished-dim",
        "description": "Diminished chord using dim suffix",
        "symbol": "dim",
        "examples": [
          "Cdim",
          "Bdim",
          "Fdim",
          "Cdim7"
        ],
        "tags": [
          "diminished",
          "quality"
        ]
      },
      {
        "name": "diminished-degree",
        "description": "Diminished chord using ° (degree sign U+00B0)",
        "symbol": "°",
        "examples": [
          "C°",
          "B°",
          "F°",
          "C°7"
        ],
        "tags": [
          "diminished",
          "quality"
        ]
      },
      {
        "name": "diminished-ring",
        "description": "Diminished chord using ˚ (ring above U+02DA)",
        "symbol": "˚",
        "examples": [
          "C˚",
          "B˚",
          "F˚",
          "C˚7"
        ],
        "tags": [
          "diminished",
          "quality"
        ]
      },
      {
        "name": "diminished-ordinal",
        "description": "Diminished chord using º (masculine ordinal indicator U+00BA)",
        "symbol": "º",
        "examples": [
          "Cº",
          "Bº",
          "Fº",
          "Cº7"
        ],
        "tags": [
          "diminished",
          "quality"
        ]
      },
      {
        "name": "half-diminished-ø",
        "description": "Half-diminished chord using ø symbol",
        "symbol": "ø",
        "examples": [
          "Cø",
          "Dø7",
          "F#ø",
          "Bø"
        ],
        "tags": [
          "half-diminished",
          "quality"
        ]
      },
      {
        "name": "half-diminished-m7b5",
        "description": "Half-diminished chord using m7b5 notation",
        "symbol": "m7b5",
        "examples": [
          "Dm7b5",
          "F#m7b5",
          "Bm7b5",
          "Em7b5"
        ],
        "tags": [
          "half-diminished",
          "quality"
        ]
      },
      {
        "name": "augmented-aug",
        "description": "Augmented chord using aug suffix",
        "symbol": "aug",
        "examples": [
          "Caug",
          "Gaug",
          "Eaug"
        ],
        "tags": [
          "augmented",
          "quality"
        ]
      },
      {
        "name": "augmented-plus",
        "description": "Augmented chord using + symbol",
        "symbol": "+",
        "examples": [
          "C+",
          "G+",
          "E+"
        ],
        "tags": [
          "augmented",
          "quality"
        ]
      },
      {
        "name": "major",
        "description": "Explicit major quality",
        "symbol": "maj",
        "examples": [
          "Cmaj",
          "Cmaj7",
          "Cmaj9",
          "Bbmaj7",
          "Ebmaj7",
          "Fmaj7"
        ],
        "tags": [
          "major",
          "quality"
        ]
      },
      {
        "name": "minor-major",
        "description": "Minor chord with major 7th",
        "symbol": "mmaj7",
        "examples": [
          "Cmmaj7",
          "Ammaj7",
          "Ebmmaj7",
          "Ebmmaj7/Gb"
        ],
        "tags": [
          "minor-major",
          "quality"
        ]
      },
      {
        "name": "sus2",
        "description": "Suspended 2nd - replaces 3rd with 2nd",
        "symbol": "sus2",
        "examples": [
          "Csus2",
          "Dsus2",
          "Asus2",
          "Gsus2"
        ],
        "tags": [
          "suspended"
        ]
      },
      {
        "name": "sus4",
        "description": "Suspended 4th - replaces 3rd with 4th",
        "symbol": "sus4",
        "examples": [
          "Csus4",
          "Dsus4",
          "Gsus4",
          "G7sus4",
          "D7sus4"
        ],
        "tags": [
          "suspended"
        ]
      },
      {
        "name": "6th",
        "description": "6th chord - adds major 6th to triad",
        "symbol": "6",
        "examples": [
          "C6",
          "Am6",
          "Gm6",
          "Dm6",
          "Ebm6"
        ],
        "tags": [
          "extension"
        ]
      },
      {
        "name": "7th",
        "description": "7th chord - adds 7th degree",
        "symbol": "7",
        "examples": [
          "C7",
          "Cm7",
          "Cmaj7",
          "Cdim7",
          "Am7",
          "G7",
          "Bb7"
        ],
        "tags": [
          "extension"
        ]
      },
      {
        "name": "9th",
        "description": "9th chord - extends through 9th degree",
        "symbol": "9",
        "examples": [
          "C9",
          "Cm9",
          "Cmaj9",
          "G9",
          "Am9"
        ],
        "tags": [
          "extension"
        ]
      },
      {
        "name": "11th",
        "description": "11th chord - extends through 11th degree",
        "symbol": "11",
        "examples": [
          "C11",
          "Cm11",
          "G11",
          "Am11"
        ],
        "tags": [
          "extension"
        ]
      },
      {
        "name": "13th",
        "description": "13th chord - extends through 13th degree",
        "symbol": "13",
        "examples": [
          "C13",
          "Cm13",
          "G13",
          "D13"
        ],
        "tags": [
          "extension"
        ]
      },
      {
        "name": "add9",
        "description": "Added 9th without 7th",
        "symbol": "add9",
        "examples": [
          "Cadd9",
          "Gadd9",
          "Amadd9",
          "Dadd9"
        ],
        "tags": [
          "add"
        ]
      },
      {
        "name": "add11",
        "description": "Added 11th",
        "symbol": "add11",
        "examples": [
          "Cadd11",
          "Dadd11",
          "Gadd11"
        ],
        "tags": [
          "add"
        ]
      },
      {
        "name": "add13",
        "description": "Added 13th",
        "symbol": "add13",
        "examples": [
          "Cadd13",
          "Dadd13"
        ],
        "tags": [
          "add"
        ]
      },
      {
        "name": "b5",
        "description": "Flat 5th alteration",
        "symbol": "b5",
        "examples": [
          "C7b5",
          "G7b5",
          "Dm7b5"
        ],
        "tags": [
          "alteration"
        ]
      },
      {
        "name": "#5",
        "description": "Sharp 5th alteration",
        "symbol": "#5",
        "examples": [
          "C7#5",
          "G7#5",
          "E7#5"
        ],
        "tags": [
          "alteration"
        ]
      },
      {
        "name": "b9",
        "description": "Flat 9th alteration",
        "symbol": "b9",
        "examples": [
          "C7b9",
          "G7b9",
          "B7b9",
          "C7(b9)"
        ],
        "tags": [
          "alteration"
        ]
      },
      {
        "name": "#9",
        "description": "Sharp 9th alteration (Hendrix chord)",
        "symbol": "#9",
        "examples": [
          "C7#9",
          "E7#9",
          "G7#9",
          "C7(#9)"
        ],
        "tags": [
          "alteration"
        ]
      },
      {
        "name": "#11",
        "description": "Sharp 11th alteration (lydian dominant)",
        "symbol": "#11",
        "examples": [
          "C7#11",
          "F7#11",
          "Cmaj7#11",
          "C7(#11)"
        ],
        "tags": [
          "alteration"
        ]
      },
      {
        "name": "b13",
        "description": "Flat 13th alteration",
        "symbol": "b13",
        "examples": [
          "C7b13",
          "A7b13",
          "G7b13",
          "A7(b13)"
        ],
        "tags": [
          "alteration"
        ]
      },
      {
        "name": "slash",
        "description": "Chord with specified bass note. The note after / indicates the lowest note to play, which may be a chord tone (inversion) or non-chord tone (added bass). Commonly used for bass lines and voice leading.",
        "symbol": "/",
        "examples": [
          "C/E",
          "C/G",
          "Am/G",
          "G/B",
          "D/F#",
          "C/Bb",
          "Bb7/Ab",
          "Ebmmaj7/Gb"
        ],
        "tags": [
          "bass",
          "slash"
        ]
      },
      {
        "name": "bass-line",
        "description": "Slash chords used in sequence to create melodic bass movement. Common patterns include descending (C → C/B → Am → Am/G), ascending (Am → Am/B → C), and chromatic lines (C → C/B → C/Bb → C/A). Essential for voice leading in folk, pop, jazz, and bossa nova.",
        "examples": [
          "C/B",
          "Am/G",
          "Am/F#",
          "D/F#",
          "G/F",
          "Em/D",
          "C/Bb",
          "Dm/C",
          "Fmaj7/E",
          "E7/G#"
        ],
        "patterns": [
          {
            "name": "descending major",
            "sequence": [
              "C",
              "C/B",
              "Am",
              "Am/G",
              "F"
            ]
          },
          {
            "name": "descending minor",
            "sequence": [
              "Am",
              "Am/G",
              "Am/F#",
              "Fmaj7"
            ]
          },
          {
            "name": "ascending",
            "sequence": [
              "Am",
              "Am/B",
              "C",
              "C/D",
              "G"
            ]
          },
          {
            "name": "chromatic descent",
            "sequence": [
              "C",
              "C/B",
              "C/Bb",
              "C/A"
            ]
          },
          {
            "name": "jazz turnaround",
            "sequence": [
              "Cmaj7",
              "Am7",
              "Dm7",
              "G7/F",
              "Em7",
              "A7/C#"
            ]
          }
        ],
        "tags": [
          "bass",
          "slash",
          "pattern"
        ]
      },
      {
        "name": "no-chord",
        "description": "No chord / tacet - indicates silence or no accompaniment",
        "symbol": "N.C.",
        "examples": [
          "N.C."
        ],
        "tags": [
          "special"
        ]
      }
    ]
  }
}